name: Run Notion Actions

on:
  workflow_dispatch:
    inputs:
      get_users:
        description: "Láº¥y danh sÃ¡ch thÃ nh viÃªn"
        type: boolean
        required: false
        default: true
      reset_data:
        description: "Reset data"
        type: boolean
        required: false
        default: true
      delete_notify:
        description: "XÃ³a thÃ´ng bÃ¡o cÅ©"
        type: boolean
        required: false
        default: true
      notify_users:
        description: "Gá»­i thÃ´ng bÃ¡o má»›i"
        type: boolean
        required: false
        default: true

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§© Checkout repository
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: ğŸ“¦ Install dependencies
        run: npm ci

      - name: ğŸš€ Run selected Notion actions
        run: |
          ACTIONS=""
          
          # Duyá»‡t tá»«ng checkbox vÃ  thÃªm vÃ o danh sÃ¡ch náº¿u Ä‘Æ°á»£c báº­t
          if [ "${{ github.event.inputs.get_users }}" == "true" ]; then
            ACTIONS="$ACTIONS get-users"
          fi

          if [ "${{ github.event.inputs.reset_data }}" == "true" ]; then
            ACTIONS="$ACTIONS reset-data"
          fi

          if [ "${{ github.event.inputs.delete_notify }}" == "true" ]; then
            ACTIONS="$ACTIONS delete-notify"
          fi

          if [ "${{ github.event.inputs.notify_users }}" == "true" ]; then
            ACTIONS="$ACTIONS notify-users"
          fi

          echo "ğŸ”¹ CÃ¡c action sáº½ cháº¡y: $ACTIONS"
          node index.js $ACTIONS
